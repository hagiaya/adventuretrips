CREATE TABLE IF NOT EXISTS public.partners (id UUID DEFAULT uuid_generate_v4() PRIMARY KEY, name TEXT NOT NULL, logo_url TEXT NOT NULL, website_url TEXT, is_active BOOLEAN DEFAULT true, created_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()) NOT NULL); ALTER TABLE public.partners ENABLE ROW LEVEL SECURITY; CREATE POLICY " Public can view active partners\ ON public.partners FOR SELECT USING (is_active = true); CREATE POLICY \Admins can do everything\ ON public.partners FOR ALL USING (exists(select 1 from public.users where id = auth.uid() and role in ('admin', 'superadmin')));ALTER TABLE public.partners ADD COLUMN IF NOT EXISTS category TEXT DEFAULT 'Customer';
